<p-slide>
  <h1 class="our-header">
    The problem with styles
    <p-fragment>
      <small>(and Shadow DOM)</small>
    </p-fragment>
  </h1>
</p-slide>
<p-slide>
  <ul class="self-center">
    <li><p-fragment>ðŸ‘‰ can't style from outside</p-fragment></li>
    <li><p-fragment>ðŸ‘‰ low level API</p-fragment></li>
    <li><p-fragment>ðŸ‘‰ FOUCs</p-fragment></li>
  </ul>
</p-slide>
<p-slide class="center">
  <h2>The <code aria-label="deep operator">>>></code> operator&hellip;</h2>
  <p-fragment class="self-center">
    <pre class="big language-css"><code>my-form.no-btn >>> button {
  display: none;
}</code></pre>
  </p-fragment>
  <p-fragment>
    <p>&hellip; would defeat the purpose of style encapsulation</p>
  </p-fragment>
</p-slide>
<p-slide>
  <h4 class="center">Only this works&hellip;</h4>
  <div class="self-center">
    <pre class="language-html big"><code>&lt;my-component style="--my-color: blue">&lt;/my-component></code></pre>
    <pre class="language-css big"><code>/* my-component.css */
:host > div {
  background-color: var(--my-color);
}</code></pre>
  </div>
</p-slide>
<p-slide>
  <h4 class="center">A great idea!</h4>
  <pre class="language-css self-center"><code>/* styles.css */
:root {
  --my-mixin: {
    background-color: red;
    color: white;
  }
}
/* my-component.css */
:host > div {
  @apply(--my-mixin);
}</code></pre>
</p-slide>
<p-slide>
  <h4 class="center">&hellip; but what does <em>this</em> even mean?</h4>
  <pre class="language-css self-center"><code>:root {
  --my-color: red;
  --my-mixin: {
    background-color: var(--my-color);
  }
}
.a-test {
  --my-color: green;
  @apply(--my-mixin);
}</code></pre>
</p-slide>
<p-slide>
  <h4 class="our-header">CSS Shadow Parts</h4>
  <div class="self-center">
    <pre class="language-html"><code>#shadow-root
  &lt;header part="box-header">...&lt;/header>
  &lt;div part="box-content">...&lt;/div></code></pre>
    <p-fragment>
      <pre class="language-css"><code>/* styles.css */
::part(box-header) {
  font: bold 2em system-ui, sans-serif;
}</code></pre>
    </p-fragment>
  </div>
</p-slide>
<p-slide>
  <h4>Part forwarding</h4>
  <div class="self-center">
    <pre class="language-html"><code>#shadow-root (inner-box)
  &lt;hr>
  &lt;section part="inner-content">...&lt;/section>
  &lt;hr></code></pre>
    <pre class="language-html"><code>#shadow-root (outer-box)
  &lt;header part="outer-header">...&lt;/header>
  &lt;inner-box part="inner-content => outer-content">...&lt;/inner-box></code></pre>
  </div>
</p-slide>
<p-slide>
  <support-table chrome="73" firefox="72" safari="">Shadow Parts</support-table>
</p-slide>
<p-slide>
  <h1 class="center">&ldquo;Loading .css files is a pain!&rdquo;</h1>
</p-slide>
<p-slide>
  <pre class="language-js self-center big"><code>constructor() {
  ...
  const styleEl = document.createElement('style');
  styleEl.textContent = 'div { color: red; }';
  this.shadowRoot.appendChild(styleEl);
}</code></pre>
</p-slide>
<p-slide>
  <pre class="language-js self-center big"><code>constructor() {
  ...
  const linkEl = document.createElement('link');
  linkEl.rel = 'stylesheet';
  linkEl.href = 'component.css';
  this.shadowRoot.appendChild(linkEl);
}</code></pre>
</p-slide>
<p-slide>
  <h2 class="center">A new way to apply styles</h2>
</p-slide>
<p-slide>
  <pre class="language-js self-center big"><code>const styles = new CSSStyleSheet();
styles.replaceSync('div { color: red; }');

// Or asynchronously, we can use @import
styles.replace('@import "/foo.css"')
  .then(sheet => { ... });</code></pre>
</p-slide>
<p-slide>
  <pre class="language-js self-center big"><code>import { styles } from './styles.js';

class MyComponent extends HTMLElement {
  constructor() {
    ...
    this.shadowRoot.adoptedStyleSheets = [ styles ];
  }
}</code></pre>
</p-slide>
<p-slide>
  <h4 class="our-header">&hellip;The heck is <code>.adoptedStyleSheets</code>?</h4>
  <p-fragment class="self-center">
    <p-fragment><em>Frozen</em></p-fragment>
    <code>Array</code>
  </p-fragment>
  <p-fragment class="self-center">
    <small>as in <code>Object.freeze</code></small>
  </p-fragment>
</p-slide>
<p-slide class="center">
  <div class="two-columns align-center">
    <div>
      <img src="img/drake-bad.webp" alt="Drake 'bad' meme" style="width: 7em">
    </div>
    <pre class="language-js"><code>document
  .adoptedStyleSheets
  .push(sheet);</code></pre>
  </div>
  <p-fragment>
    <div class="two-columns align-center">
      <div>
        <img src="img/drake-good.webp" alt="Drake 'bad' meme" style="width: 7em">
      </div>
      <pre class="language-js"><code>document.adoptedStyleSheets = [
  ...document.adoptedStyleSheets,
  sheet
];</code></pre>
    </div>
  </p-fragment>
</p-slide>
<p-slide>
  <support-table chrome="73" firefox="" safari="">Constructable Stylesheets</support-table>
</p-slide>
<p-slide>
  <h1 class="center">&ldquo;Better, but&hellip;&rdquo;</h1>
</p-slide>
<p-slide>
  <h1 class="center">CSS Modules</h1>
  <p-fragment><h4 class="center">
    (No, not <em>those</em> <a href="https://github.com/css-modules/css-modules">CSS Modules</a>&hellip;
  </h4></p-fragment>
</p-slide>
<p-slide>
  <h3 class="our-header"><em>These</em> CSS Modules&hellip;</h3>
  <p-fragment class="self-center">
    <pre class="language-js big"><code>import sheet from './styles.css';</code></pre>
  </p-fragment>
  <p-fragment>
    <p class="center"><code>sheet</code> is a <code>CSSStyleSheet</code></p>
  </p-fragment>
</p-slide>
<p-slide>
  <pre class="language-js self-center big"><code>import sheet from './styles.css';

class MyComponent extends HTMLElement {
  constructor() {
    ...
    this.shadowRoot.adoptedStyleSheets = [ sheet ];
  }
}</code></pre>
</p-slide>
<p-slide>
  <support-table chrome="" firefox="" safari="">CSS Modules</support-table>
  <a href="https://github.com/w3c/webcomponents/issues/759" class="center">
    github.com/w3c/webcomponents/issues/759
  </a>
</p-slide>
